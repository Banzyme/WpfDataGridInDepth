<Window x:Class="PeculiaWPFDataGridInDepth.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:PeculiaWPFDataGridInDepth"
        xmlns:sys="clr-namespace:System;assembly=mscorlib"
        xmlns:dt="clr-namespace:PeculiaWPFDataGridInDepth.Data"
        mc:Ignorable="d"
        Title="WPF DataGrid In Depth"
        Height="450"
        Width="800">

    <Window.Resources>
        <ObjectDataProvider x:Key="GenderEnums"
                            MethodName="GetValues"
                            ObjectType="{x:Type sys:Enum}">
            <ObjectDataProvider.MethodParameters>
                <x:Type TypeName="dt:GENDER" />
            </ObjectDataProvider.MethodParameters>
        </ObjectDataProvider>
    </Window.Resources>

    <Grid x:Name="GridWrapper">
        <TabControl DataContext="{Binding TaxPayersList}">
            <TabItem Header="Basic DataGrid">

                <!--Columns will be AutoGenerated by default-->
                <DataGrid x:Name="basicDataGrid"
                          ItemsSource="{Binding}"
                          AlternatingRowBackground="LightBlue"
                          AlternationCount="2" />
            </TabItem>

            <TabItem Header="DataGrid with complex types">

                <!--Need manually define a column for each field from the collection entries-->
                <DataGrid x:Name="complxTypesDataGrid"
                          ItemsSource="{Binding}"
                          AutoGenerateColumns="False"
                          AlternatingRowBackground="LightBlue"
                          AlternationCount="2">

                    <DataGrid.Columns>
                        <DataGridTextColumn Header="User Id"
                                            Binding="{Binding Id}" />
                        <DataGridTextColumn Header="Firstname"
                                            Binding="{Binding Firstname}" />
                        <DataGridTextColumn Header="Lastname"
                                            Binding="{Binding Lastname}" />
                        <DataGridTextColumn Header="Tax reference"
                                            Binding="{Binding TaxRef}" />

                        <DataGridComboBoxColumn Header="Gender"
                                                SelectedItemBinding="{Binding Gender}"
                                                ItemsSource="{Binding Source={StaticResource GenderEnums }}" />


                        <DataGridTemplateColumn Header="Adress">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate x:Name="DGAdressTemplate">
                                    <StackPanel Orientation="Horizontal">
                                        <TextBlock Text="{Binding Adress.Place}" />
                                        <TextBlock Text=" , " />
                                        <TextBlock Text="{Binding Adress.StreeNo}" />
                                    </StackPanel>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>

                    </DataGrid.Columns>


                </DataGrid>
            </TabItem>

            <TabItem Header="Handling nested collections">
                <DataGrid x:Name="DGNestedCols"
                          ItemsSource="{Binding}"
                          AutoGenerateColumns="False">


                    <DataGrid.Columns>

                        <DataGridTextColumn Header="User Id"
                                            Binding="{Binding Id}" />
                        <DataGridTextColumn Header="Firstname"
                                            Binding="{Binding Firstname}" />
                        <DataGridTextColumn Header="Lastname"
                                            Binding="{Binding Lastname}" />
                        <DataGridTextColumn Header="Tax reference"
                                            Binding="{Binding TaxRef}" />

                        <DataGridComboBoxColumn Header="Gender"
                                                SelectedItemBinding="{Binding Gender}"
                                                ItemsSource="{Binding Source={StaticResource GenderEnums }}" />


                        <DataGridTemplateColumn Header="Adress">
                            <DataGridTemplateColumn.CellTemplate>

                                <DataTemplate x:Name="DGAdressTemplate2">
                                    <StackPanel Orientation="Horizontal">
                                        <TextBlock Text="{Binding Adress.Place}" />
                                        <TextBlock Text=" , " />
                                        <TextBlock Text="{Binding Adress.StreeNo}" />
                                    </StackPanel>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>


                        <!--Displaying a nested collection-->
                        <DataGridTemplateColumn Header="Audit Cases">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate x:Name="nestedCollTemplate">

                                    <ListView ItemsSource="{Binding AuditCases}">
                                        <ListView.ItemTemplate>
                                            <DataTemplate>
                                                <StackPanel Orientation="Horizontal">
                                                    <TextBox Text="{Binding Id}" />
                                                    <TextBox Text=" | " />
                                                    <TextBox Text="{Binding Status}" />
                                                    <TextBox Text=" | " />
                                                    <TextBox Text="{Binding AuditReason}" />
                                                </StackPanel>
                                            </DataTemplate>
                                        </ListView.ItemTemplate>
                                    </ListView>

                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>

                    </DataGrid.Columns>

                </DataGrid>
            </TabItem>

            <TabItem Header="Grouping Items - Basic example">

                <DataGrid HorizontalAlignment="Stretch"
                          IsReadOnly="True"
                          CanUserAddRows="False"
                          ColumnWidth="*"
                          ItemsSource="{Binding RelativeSource={RelativeSource AncestorType=Window,Mode=FindAncestor}, Path=DataContext.TaxpayersCollection}">

                    <DataGrid.GroupStyle>
                        <GroupStyle>
                            <GroupStyle.ContainerStyle>
                                <Style TargetType="{x:Type GroupItem}">
                                    <Setter Property="Template">
                                        <Setter.Value>

                                            <ControlTemplate x:Name="currentGroup"
                                                             TargetType="{x:Type GroupItem}">

                                                <Expander IsExpanded="True"
                                                          Background="#FF112255"
                                                          BorderBrush="#FF002255"
                                                          BorderThickness="1,1,1,5">
                                                    <Expander.Header>
                                                        <DockPanel>
                                                            <TextBlock FontWeight="Bold"
                                                                       Foreground="#FFEEEEEE"
                                                                       Text="{Binding Path=Name}"
                                                                       Margin="5,0,0,0"
                                                                       Width="100" />
                                                            <TextBlock FontWeight="Bold"
                                                                       Text="{Binding Path=ItemCount}" />
                                                        </DockPanel>
                                                    </Expander.Header>
                                                    <Expander.Content>
                                                        <ItemsPresenter />
                                                    </Expander.Content>
                                                </Expander>
                                            </ControlTemplate>

                                        </Setter.Value>
                                    </Setter>
                                </Style>
                            </GroupStyle.ContainerStyle>
                        </GroupStyle>
                    </DataGrid.GroupStyle>


                </DataGrid>

            </TabItem>


            <TabItem Header="Datagrid filtering">

                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <RowDefinition  Height="*" />
                    </Grid.RowDefinitions>

                    <StackPanel HorizontalAlignment="Center"
                                Margin="0,10,0,10"
                                Grid.Row="0"
                                Orientation="Horizontal"
                                Height="Auto">
                        <TextBox Text="Filtering by Gener" />
                        <ComboBox SelectedIndex="0"
                                  ItemsSource="{Binding Source={StaticResource GenderEnums}}" />
                    </StackPanel>

                    <DataGrid Grid.Row="1" />
                </Grid>

            </TabItem>

        </TabControl>

    </Grid>
</Window>
